# populate_personas.py

from pymongo import MongoClient

# --- MongoDB ì—°ê²° ì„¤ì • ---
# main.pyì™€ ë™ì¼í•œ ì—°ê²° ì •ë³´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
MONGO_CONNECTION_STRING = "mongodb+srv://staran1227:Dksrbstmd122719!@cluster0.1vb2qmf.mongodb.net/"
client = MongoClient(MONGO_CONNECTION_STRING)
db = client["finance_article"]
collection = db["standard_person"]

# --- 6ê°€ì§€ í‘œì¤€ í˜ë¥´ì†Œë‚˜ ë°ì´í„° ì •ì˜ ---
# ë³´ë‚´ì£¼ì‹  ì´ë¯¸ì§€ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë°ì´í„°ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
personas = [
    {
        "persona_name": "í•™ìƒ (ëŒ€í•™ìƒ)",
        "description": "ì•„ì§ ì†Œë“ì€ ì—†ê±°ë‚˜ ì ì§€ë§Œ, ì²« ê¸ˆìœµ ìŠµê´€ì„ í˜•ì„±í•˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ì‹œê¸°.",
        "financial_goal": "í•™ìê¸ˆ ê´€ë¦¬, ì•„ë¥´ë°”ì´íŠ¸ ì†Œë“ ê´€ë¦¬, ê±´ì „í•œ ì†Œë¹„ ìŠµê´€ í˜•ì„±.",
        "related_news_keywords": ["ì •ë¶€ ì²­ë…„ ì§€ì› ì •ì±…", "ì²´í¬ì¹´ë“œ í˜œíƒ", "ì†Œì•¡ ì ê¸ˆ/íˆ¬ì"]
    },
    {
        "persona_name": "20ëŒ€ ì‚¬íšŒì´ˆë…„ìƒ",
        "description": "ì²« ì›”ê¸‰ì„ ë°›ê¸° ì‹œì‘í•˜ë©° ë³¸ê²©ì ì¸ ìì‚° í˜•ì„±ì„ ì‹œì‘.",
        "financial_goal": "1,000ë§Œ ì› ì¢…ì£ëˆ ëª¨ìœ¼ê¸°, í•™ìê¸ˆ ëŒ€ì¶œ ìƒí™˜.",
        "related_news_keywords": ["ì²­ë…„ë„ì•½ê³„ì¢Œ", "ì˜ˆ/ì ê¸ˆ ê¸ˆë¦¬", "ì£¼ì‹/ì½”ì¸ ë“± ì²« íˆ¬ì"]
    },
    {
        "persona_name": "30ëŒ€ ì‹ í˜¼ë¶€ë¶€/1ì¸ ê°€êµ¬",
        "description": "ê²°í˜¼, ì£¼íƒ êµ¬ë§¤ ë“± ì¸ìƒì˜ í° ì¬ë¬´ ì´ë²¤íŠ¸ë¥¼ ê²ªëŠ” ì‹œê¸°.",
        "financial_goal": "ë‚´ ì§‘ ë§ˆë ¨ (ì „ì„¸ ë˜ëŠ” ë§¤ë§¤), ì¥ê¸° ìì‚° í˜•ì„± ì‹œì‘.",
        "related_news_keywords": ["ë¶€ë™ì‚° ì •ì±…", "ëŒ€ì¶œ ê·œì œ(DSR, LTV)", "ê¸ˆë¦¬ ë³€ë™"]
    },
    {
        "persona_name": "40ëŒ€ (ìë…€ ì–‘ìœ¡ê¸°)",
        "description": "ì†Œë“ì´ ê°€ì¥ ì•ˆì •ì ì´ì§€ë§Œ, ìë…€ êµìœ¡ë¹„ ë“± ì§€ì¶œë„ ê°€ì¥ ë§ì€ ì‹œê¸°.",
        "financial_goal": "ìë…€ êµìœ¡ ìê¸ˆ ë§ˆë ¨, ë³¸ê²©ì ì¸ ë…¸í›„ ì¤€ë¹„.",
        "related_news_keywords": ["ì„¸ê¸ˆ ì •ì±…(ì—°ë§ì •ì‚°)", "í€ë“œ/ETF ë“± ì¤‘ìœ„í—˜ íˆ¬ì", "ì—°ê¸ˆ"]
    },
    {
        "persona_name": "50ëŒ€ (ì€í‡´ ì¤€ë¹„ê¸°)",
        "description": "ì€í‡´ê°€ ê°€ê¹Œì›Œì§€ë©°, ê³µê²©ì ì¸ íˆ¬ìë³´ë‹¤ëŠ” ìì‚°ì„ ì§€í‚¤ëŠ” ë° ì§‘ì¤‘.",
        "financial_goal": "ì•ˆì •ì ì¸ ì€í‡´ ìê¸ˆ í¬íŠ¸í´ë¦¬ì˜¤ ì™„ì„±, ë¶€ì±„ ì •ë¦¬.",
        "related_news_keywords": ["í‡´ì§ì—°ê¸ˆ(IRP) ë° êµ­ë¯¼ì—°ê¸ˆ", "ë°°ë‹¹ì£¼", "ì±„ê¶Œ", "ê¸ˆìœµì†Œë“ì¢…í•©ê³¼ì„¸"]
    },
    {
        "persona_name": "60ëŒ€ ì´ìƒ (ì€í‡´ í›„)",
        "description": "ëª¨ì•„ë‘” ìì‚°ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë©°, ì•ˆì •ì ì¸ í˜„ê¸ˆ íë¦„ì„ ë§Œë“œëŠ” ê²ƒì´ ì¤‘ìš”.",
        "financial_goal": "ì•ˆì •ì ì¸ ìƒí™œë¹„ í™•ë³´, ìì‚° ìƒì† ë° ì¦ì—¬ ê³„íš.",
        "related_news_keywords": ["ì—°ê¸ˆ ìˆ˜ë ¹ ë°©ë²•", "ì¦‰ì‹œì—°ê¸ˆ", "ì£¼íƒì—°ê¸ˆ", "ê±´ê°•ë³´í—˜", "ìƒì†ì„¸"]
    }
]

def populate_data():
    """
    'standard_person' ì»¬ë ‰ì…˜ì— 6ê°€ì§€ í˜ë¥´ì†Œë‚˜ ë°ì´í„°ë¥¼ ì‚½ì…í•©ë‹ˆë‹¤.
    ë°ì´í„°ê°€ ì´ë¯¸ ì¡´ì¬í•˜ë©´ ì¤‘ë³µ ì‚½ì…ì„ ë°©ì§€í•©ë‹ˆë‹¤.
    """
    try:
        # 1. DB ì—°ê²° í™•ì¸
        client.admin.command('ping')
        print("âœ… MongoDBì— ì„±ê³µì ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.")

        # 2. ë°ì´í„° ì¤‘ë³µ í™•ì¸
        if collection.count_documents({}) > 0:
            print("ğŸŸ¡ 'standard_person' ì»¬ë ‰ì…˜ì— ì´ë¯¸ ë°ì´í„°ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ì‘ì—…ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.")
            return

        # 3. ë°ì´í„° ì‚½ì…
        result = collection.insert_many(personas)
        print(f"âœ… ë°ì´í„° ì‚½ì… ì„±ê³µ! {len(result.inserted_ids)}ê°œì˜ í˜ë¥´ì†Œë‚˜ë¥¼ 'standard_person' ì»¬ë ‰ì…˜ì— ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.")

    except Exception as e:
        print(f"âŒ ë°ì´í„° ì‚½ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {e}")
    finally:
        # 4. ì—°ê²° í•´ì œ
        client.close()
        print("ğŸ”Œ MongoDB ì—°ê²°ì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤.")

if __name__ == "__main__":
    populate_data()
